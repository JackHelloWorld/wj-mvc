<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>后台管理</title>
		<!-- Tell the browser to be responsive to screen width -->
		<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
		<!-- Bootstrap 3.3.7 -->
		<link rel="stylesheet" href="./bower_components/bootstrap/dist/css/bootstrap.min.css">
		<!-- Font Awesome -->
		<link rel="stylesheet" href="./bower_components/font-awesome/css/font-awesome.min.css">
		<!-- Ionicons -->
		<link rel="stylesheet" href="./bower_components/Ionicons/css/ionicons.min.css">
		<!-- Theme style -->
		<link rel="stylesheet" href="./dist/css/AdminLTE.min.css">
		<!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
		<link rel="stylesheet" href="./dist/css/skins/_all-skins.min.css">

		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

		<!-- Google Font -->
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
	</head>

	<body class="sidebar-mini skin-blue-light">
		<!-- Site wrapper -->
		<div class="wrapper" onhashchange="hashchange()">

			<header class="main-header">
				<!-- Logo -->
				<a href="javascript:;" class="logo">
					<!-- mini logo for sidebar mini 50x50 pixels -->
					<span class="logo-mini"><b>A</b>dmin</span>
					<!-- logo for regular state and mobile devices -->
					<span class="logo-lg"><b>后台管理</b>系统</span>
				</a>
				<!-- Header Navbar: style can be found in header.less -->
				<nav class="navbar navbar-static-top">
					<!-- Sidebar toggle button-->
					<a href="javascript:;" class="sidebar-toggle" data-toggle="push-menu" role="button">
						<span class="sr-only">切换导航</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>

					<div class="navbar-custom-menu">
						<ul class="nav navbar-nav">
							<!-- Messages: style can be found in dropdown.less-->
							<li class="dropdown messages-menu">
								<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">
									<i class="fa fa-envelope-o"></i>
									<span class="label label-success">4</span>
								</a>
								<ul class="dropdown-menu">
									<li class="header">你有<span>4</span>条未读信息</li>
									<li>
										<!-- inner menu: contains the actual data -->
										<ul class="menu">
											<li>
												<!-- start message -->
												<a href="javascript:;">
													<div class="pull-left">
														<img src="./dist/img/user2-160x160.jpg" class="img-circle" alt="头像">
													</div>
													<h4>
                        管理员
                        <small><i class="fa fa-clock-o"></i> 5 分钟前</small>
                      </h4>
													<p>提交工作信息...</p>
												</a>
											</li>
											<!-- end message -->
										</ul>
									</li>
									<li class="footer">
										<a href="javascript:;">查看所有信息</a>
									</li>
								</ul>
							</li>
							<!-- Notifications: style can be found in dropdown.less -->
							<li class="dropdown notifications-menu">
								<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">
									<i class="fa fa-bell-o"></i>
									<span class="label label-warning">10</span>
								</a>
								<ul class="dropdown-menu">
									<li class="header">你有<span>10</span>个未读通知</li>
									<li>
										<!-- inner menu: contains the actual data -->
										<ul class="menu">
											<li>
												<a href="javascript:;">
													<i class="fa fa-users text-aqua"></i> 5 个新成员今日加入
												</a>
											</li>
										</ul>
									</li>
									<li class="footer">
										<a href="javascript:;">查看全部</a>
									</li>
								</ul>
							</li>
							<!-- User Account: style can be found in dropdown.less -->
							<li class="dropdown user user-menu">
								<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">
									<img src="./dist/img/user2-160x160.jpg" class="user-image" alt="User Image">
									<span class="hidden-xs">张三</span>
								</a>
								<ul class="dropdown-menu">
									<!-- User image -->
									<li class="user-header">
										<img src="./dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">

										<p>
											张三 - 管理员
											<small>登录时间&nbsp;:&nbsp;2018-10-10 12:12:12</small>
										</p>
									</li>

									<!-- Menu Footer-->
									<li class="user-footer">
										<div class="pull-left">
											<a href="javascript:;" class="btn btn-default btn-flat">资料修改</a>
										</div>
										<div class="pull-right">
											<a href="javascript:;" class="btn btn-default btn-flat">退出</a>
										</div>
									</li>
								</ul>
							</li>
							<!-- Control Sidebar Toggle Button -->
							<li>
								<a href="javascript:;" data-toggle="control-sidebar"><i class="fa fa-gears"></i></a>
							</li>
						</ul>
					</div>
				</nav>
			</header>

			<!-- =============================================== -->

			<!-- Left side column. contains the sidebar -->
			<aside class="main-sidebar">
				<!-- sidebar: style can be found in sidebar.less -->
				<section class="sidebar">
					<!-- Sidebar user panel -->
					<div class="user-panel">
						<div class="pull-left image">
							<img src="./dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
						</div>
						<div class="pull-left info">
							<p>张三</p>
							<a href="javascript:;"><i class="fa fa-circle text-success"></i> 管理员</a>
						</div>
					</div>
					<!-- search form -->
					<div action="javascript:;" method="get" class="sidebar-form">
						<div class="input-group">
							<input type="text" class="form-control" placeholder="全文检索">
							<span class="input-group-btn">
                <button type="submit" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i>
                </button>
              </span>
						</div>
					</div>
					<!-- /.search form -->
					<!-- sidebar menu: : style can be found in sidebar.less -->
					<ul class="sidebar-menu" data-widget="tree" id="menus-content">
						<li class="header">导航栏</li>
						<li class="">
							<a id="homeUrl" href="javascript:;">
								<i class="fa fa-folder"></i> <span>控制中心</span>
							</a>
						</li>
					</ul>
				</section>
				<!-- /.sidebar -->
			</aside>

			<!-- =============================================== -->

			<!-- Content Wrapper. Contains page content -->
			<div class="content-wrapper">
				<!-- Content Header (Page header) -->
				<section class="content-header">
					<h1>
        <span id="page-title"></span>
        <small id="page-desc"></small>
      </h1>
					<ol class="breadcrumb" id="page-menu-bar"></ol>
				</section>

				<!-- Main content -->
				<section class="content" id="page-content">

				</section>
				<!-- /.content -->
			</div>
			<!-- /.content-wrapper -->

			<footer class="main-footer">
				<div class="pull-right hidden-xs">
					<b>Version</b> v1.0
				</div>
				<strong>Copyright &copy; 2014-2016 <a href="javascript:;">后台管理</a></strong>
			</footer>

			<!-- Control Sidebar -->
			<aside class="control-sidebar control-sidebar-light" id="demo-settings">

			</aside>
			<!-- /.control-sidebar -->
			<!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
			<div class="control-sidebar-bg"></div>
		</div>
		<!-- ./wrapper -->

		<!-- jQuery 3 -->
		<script src="./bower_components/jquery/dist/jquery.min.js"></script>
		<!-- Bootstrap 3.3.7 -->
		<script src="./bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
		<!-- SlimScroll -->
		<script src="./bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
		<!-- FastClick -->
		<script src="./bower_components/fastclick/lib/fastclick.js"></script>
		<!-- AdminLTE App -->
		<script src="./dist/js/adminlte.min.js"></script>
		<!-- plugins -->
		<script src="./dist/js/index.bar.js"></script>
		<script src="plugins/layer/layer.js"></script>
		<script src="plugins/sockjs.min.js"></script>
		<script src="plugins/stomp.min.js"></script>
		<script src="plugins/config.js"></script>
		<script src="plugins/tools.js"></script>
		<script src="plugins/index/index.js"></script>
	</body>

	<script>
		var stompClient, socket;

		$(function() {
			if(window.WebSocket) {
				websocketConfig();
			} else {
				alert("错误", "浏览器不支持websocket技术通讯.");
			}
		});

		//websocket配置
		function websocketConfig() {
			//连接url为endpointChat的endpoint,对应后台WebSoccketConfig的配置
			socket = new SockJS("http://127.0.0.1:9999/webmessage");
			stompClient = Stomp.over(socket);
			stompClient.connect({}, function(frame) {
				stompClient.subscribe('/user/1A2294153CB43AA4CEE6600D221E2CBFb8b0b9e8-304a-480c-a3b1-0589c85c8a0b/queue/message', function(notification) {
					console.log(notification)
				});
			});

			sockHandle();
		}

		var sockHandle = function() {
			socket.onopen = function() {
				console.log("------连接成功------");
			};
			socket.onmessage = function(event) {
				console.log('-------Received: ' + event.data);
			};
			socket.onclose = function(event) {
				console.log('--------Info: connection closed.------');
			};
			//连接发生错误
			socket.onerror = function() {
				alert("连接错误", "网络超时或通讯地址错误.");
				disconnect();
			};
		}

		//关闭websocket
		var disconnect = function() {
			if(socket != null) {
				socket.close();
				socket = null;
			}
		}
	</script>

</html>